<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的待办清单</title>
    <style>
        /* 全局样式 */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8fafc;
            color: #333;
            line-height: 1.6;
        }
        
        /* 容器样式 */
        .container {
            max-width: 500px;
            margin: 40px auto;
            padding: 20px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
        }
        
        /* 标题样式 */
        h1 {
            text-align: center;
            color: #3b82f6; /* 明亮的蓝色 */
            margin-bottom: 30px;
            font-size: 24px;
            font-weight: 600;
        }
        
        /* 输入区域样式 */
        .input-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        input[type="text"] {
            flex: 2;
            min-width: 200px;
            padding: 12px 16px;
            border: 1px solid #d1d1d6;
            border-radius: 8px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.2s;
        }
        
        input[type="text"]:focus {
            border-color: #3b82f6;
        }
        
        /* 分类选择样式 */
        select {
            flex: 1;
            min-width: 120px;
            padding: 12px 16px;
            border: 1px solid #d1d1d6;
            border-radius: 8px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.2s;
            background-color: white;
        }
        
        select:focus {
            border-color: #3b82f6;
        }
        
        /* 筛选区域样式 */
        .filter-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 8px 16px;
            border: 1px solid #d1d1d6;
            border-radius: 20px;
            font-size: 14px;
            background-color: white;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .filter-btn:hover {
            border-color: #3b82f6;
            color: #3b82f6;
        }
        
        .filter-btn.active {
            background-color: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        
        /* 分类标签样式 */
        .category-tag {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            margin-right: 10px;
        }
        
        .category-work {
            background-color: #dbeafe;
            color: #1e40af;
        }
        
        .category-life {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .category-study {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        /* 按钮样式 */
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .add-btn {
            background-color: #3b82f6;
            color: white;
            border-radius: 8px;
        }
        
        .add-btn:hover {
            background-color: #2563eb;
        }
        
        /* 任务列表样式 */
        .task-list {
            list-style: none;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            border-bottom: 1px solid #e5e7eb;
            border-radius: 8px;
            margin-bottom: 12px;
            background-color: #f9f9f9;
        }
        
        .task-content {
            flex: 1;
            font-size: 16px;
        }
        
        .task-actions {
            display: flex;
            gap: 8px;
        }
        
        .complete-btn {
            background-color: #10b981; /* 绿色 */
            color: white;
            padding: 6px 12px;
            font-size: 14px;
        }
        
        .complete-btn:hover {
            background-color: #059669;
        }
        
        .delete-btn {
            background-color: #ef4444; /* 红色 */
            color: white;
            padding: 6px 12px;
            font-size: 14px;
        }
        
        .delete-btn:hover {
            background-color: #dc2626;
        }
        
        /* 完成状态的任务样式 */
        .completed {
            text-decoration: line-through;
            color: #9ca3af; /* 灰色 */
        }
        
        /* 响应式设计 */
        @media (max-width: 480px) {
            .container {
                margin: 20px;
                padding: 16px;
            }
            
            h1 {
                font-size: 20px;
            }
            
            .input-section {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            .task-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .task-actions {
                align-self: flex-end;
            }
        }
    </style>
</head>
<body>
    <!-- 容器 -->
    <div class="container">
        <!-- 页面标题 -->
        <h1>我的待办清单</h1>
        
        <!-- 输入区域 -->
        <div class="input-section">
            <input type="text" placeholder="输入新任务...">
            <select id="category-select">
                <option value="work">工作</option>
                <option value="life">生活</option>
                <option value="study">学习</option>
            </select>
            <button class="add-btn">添加</button>
        </div>
        
        <!-- 筛选区域 -->
        <div class="filter-section">
            <button class="filter-btn active" data-filter="all">全部</button>
            <button class="filter-btn" data-filter="work">工作</button>
            <button class="filter-btn" data-filter="life">生活</button>
            <button class="filter-btn" data-filter="study">学习</button>
        </div>
        
        <!-- 任务列表 -->
        <ul class="task-list">
            <!-- 任务项 1 -->
            <li class="task-item">
                <span class="task-content">完成项目报告</span>
                <div class="task-actions">
                    <button class="complete-btn">完成</button>
                    <button class="delete-btn">删除</button>
                </div>
            </li>
            
            <!-- 任务项 2 -->
            <li class="task-item">
                <span class="task-content">买牛奶</span>
                <div class="task-actions">
                    <button class="complete-btn">完成</button>
                    <button class="delete-btn">删除</button>
                </div>
            </li>
            
            <!-- 任务项 3 -->
            <li class="task-item">
                <span class="task-content">给妈妈打电话</span>
                <div class="task-actions">
                    <button class="complete-btn">完成</button>
                    <button class="delete-btn">删除</button>
                </div>
            </li>
        </ul>
    </div>
    
    <!-- JavaScript 代码 -->
    <script>
        // 获取DOM元素
        const inputElement = document.querySelector('input[type="text"]');
        const addButton = document.querySelector('.add-btn');
        const taskList = document.querySelector('.task-list');
        const categorySelect = document.getElementById('category-select');
        const filterButtons = document.querySelectorAll('.filter-btn');
        
        // 当前筛选类别
        let currentFilter = 'all';
        
        // 保存任务列表到 localStorage
        function saveTasks() {
            // 收集所有任务数据
            const tasks = [];
            document.querySelectorAll('.task-item').forEach(function(taskItem) {
                const taskContent = taskItem.querySelector('.task-content');
                const completeButton = taskItem.querySelector('.complete-btn');
                const categoryTag = taskItem.querySelector('.category-tag');
                
                let category = 'work'; // 默认分类
                if (categoryTag) {
                    if (categoryTag.classList.contains('category-work')) category = 'work';
                    else if (categoryTag.classList.contains('category-life')) category = 'life';
                    else if (categoryTag.classList.contains('category-study')) category = 'study';
                }
                
                tasks.push({
                    content: taskContent.textContent,
                    completed: completeButton.textContent === '取消', // 如果按钮显示"取消"，则任务已完成
                    category: category
                });
            });
            
            // 将任务数据保存到 localStorage
            localStorage.setItem('todoList', JSON.stringify(tasks));
        }
        
        // 从 localStorage 读取任务列表
        function loadTasks() {
            const savedTasks = localStorage.getItem('todoList');
            
            if (savedTasks) {
                try {
                    const tasks = JSON.parse(savedTasks);
                    
                    // 清空当前任务列表
                    taskList.innerHTML = '';
                    
                    // 重新创建任务项
                    tasks.forEach(function(task) {
                        // 创建新的任务项
                        const taskItem = document.createElement('li');
                        taskItem.className = 'task-item';
                        
                        // 创建任务内容容器
                        const taskContentContainer = document.createElement('div');
                        taskContentContainer.style.display = 'flex';
                        taskContentContainer.style.alignItems = 'center';
                        
                        // 创建分类标签
                        const categoryTag = document.createElement('span');
                        categoryTag.className = `category-tag category-${task.category || 'work'}`;
                        switch (task.category || 'work') {
                            case 'work':
                                categoryTag.textContent = '工作';
                                break;
                            case 'life':
                                categoryTag.textContent = '生活';
                                break;
                            case 'study':
                                categoryTag.textContent = '学习';
                                break;
                        }
                        
                        // 创建任务内容
                        const taskContent = document.createElement('span');
                        taskContent.className = 'task-content';
                        if (task.completed) {
                            taskContent.classList.add('completed');
                        }
                        taskContent.textContent = task.content;
                        
                        // 创建任务操作按钮容器
                        const taskActions = document.createElement('div');
                        taskActions.className = 'task-actions';
                        
                        // 创建完成按钮
                        const completeButton = document.createElement('button');
                        completeButton.className = 'complete-btn';
                        completeButton.textContent = task.completed ? '取消' : '完成';
                        
                        // 创建删除按钮
                        const deleteButton = document.createElement('button');
                        deleteButton.className = 'delete-btn';
                        deleteButton.textContent = '删除';
                        
                        // 组装任务内容容器
                        taskContentContainer.appendChild(categoryTag);
                        taskContentContainer.appendChild(taskContent);
                        
                        // 组装任务项
                        taskActions.appendChild(completeButton);
                        taskActions.appendChild(deleteButton);
                        taskItem.appendChild(taskContentContainer);
                        taskItem.appendChild(taskActions);
                        
                        // 为删除按钮添加事件监听器
                        deleteButton.addEventListener('click', function() {
                            taskList.removeChild(taskItem);
                            saveTasks(); // 保存更新后的任务列表
                        });
                        
                        // 为完成按钮添加事件监听器（切换完成状态）
                        completeButton.addEventListener('click', function() {
                            // 切换任务内容的样式
                            taskContent.classList.toggle('completed');
                            
                            // 切换按钮文字并移动任务位置
                            if (completeButton.textContent === '完成') {
                                completeButton.textContent = '取消';
                                // 任务标记为完成，移到列表底部
                                taskList.appendChild(taskItem);
                            } else {
                                completeButton.textContent = '完成';
                                // 任务标记为未完成，移到列表顶部
                                taskList.insertBefore(taskItem, taskList.firstChild);
                            }
                            
                            saveTasks(); // 保存更新后的任务列表
                        });
                        
                        // 根据完成状态添加到列表的适当位置
                        if (task.completed) {
                            taskList.appendChild(taskItem); // 已完成的任务放在底部
                        } else {
                            taskList.insertBefore(taskItem, taskList.firstChild); // 未完成的任务放在顶部
                        }
                    });
                } catch (error) {
                    console.error('读取任务列表失败:', error);
                }
            } else {
                // 清空任务列表，显示空列表
                taskList.innerHTML = '';
            }
        }
        
        // 页面加载时读取保存的任务
        loadTasks();
        
        // 添加按钮点击事件监听器
        addButton.addEventListener('click', function() {
            // 获取输入框的值并去除首尾空格
            const taskText = inputElement.value.trim();
            
            // 检查输入是否为空
            if (taskText !== '') {
                // 创建新的任务项
                const taskItem = document.createElement('li');
                taskItem.className = 'task-item';
                
                // 获取选择的分类
                const selectedCategory = categorySelect.value;
                
                // 创建任务内容容器
                const taskContentContainer = document.createElement('div');
                taskContentContainer.style.display = 'flex';
                taskContentContainer.style.alignItems = 'center';
                
                // 创建分类标签
                const categoryTag = document.createElement('span');
                categoryTag.className = `category-tag category-${selectedCategory}`;
                switch (selectedCategory) {
                    case 'work':
                        categoryTag.textContent = '工作';
                        break;
                    case 'life':
                        categoryTag.textContent = '生活';
                        break;
                    case 'study':
                        categoryTag.textContent = '学习';
                        break;
                }
                
                // 创建任务内容
                const taskContent = document.createElement('span');
                taskContent.className = 'task-content';
                taskContent.textContent = taskText;
                
                // 创建任务操作按钮容器
                const taskActions = document.createElement('div');
                taskActions.className = 'task-actions';
                
                // 创建完成按钮
                const completeButton = document.createElement('button');
                completeButton.className = 'complete-btn';
                completeButton.textContent = '完成';
                
                // 创建删除按钮
                const deleteButton = document.createElement('button');
                deleteButton.className = 'delete-btn';
                deleteButton.textContent = '删除';
                
                // 组装任务内容容器
                taskContentContainer.appendChild(categoryTag);
                taskContentContainer.appendChild(taskContent);
                
                // 组装任务项
                taskActions.appendChild(completeButton);
                taskActions.appendChild(deleteButton);
                taskItem.appendChild(taskContentContainer);
                taskItem.appendChild(taskActions);
                
                // 为删除按钮添加事件监听器
                deleteButton.addEventListener('click', function() {
                    taskList.removeChild(taskItem);
                    saveTasks(); // 保存更新后的任务列表
                });
                
                // 为完成按钮添加事件监听器（切换完成状态）
                completeButton.addEventListener('click', function() {
                    // 切换任务内容的样式
                    taskContent.classList.toggle('completed');
                    
                    // 切换按钮文字
                    if (completeButton.textContent === '完成') {
                        completeButton.textContent = '取消';
                        // 任务标记为完成，移到列表底部
                        taskList.appendChild(taskItem);
                    } else {
                        completeButton.textContent = '完成';
                        // 任务标记为未完成，移到列表顶部
                        taskList.insertBefore(taskItem, taskList.firstChild);
                    }
                    
                    saveTasks(); // 保存更新后的任务列表
                });
                
                // 将新任务添加到列表顶部（未完成任务的最上面）
                taskList.insertBefore(taskItem, taskList.firstChild);
                
                // 清空输入框
                inputElement.value = '';
                
                saveTasks(); // 保存更新后的任务列表
            }
        });
        
        // 按回车键也可以添加任务
        inputElement.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addButton.click();
            }
        });
        
        // 为现有的任务项添加删除功能
        document.querySelectorAll('.delete-btn').forEach(function(button) {
            button.addEventListener('click', function() {
                const taskItem = this.closest('.task-item');
                if (taskItem) {
                    taskList.removeChild(taskItem);
                    saveTasks(); // 保存更新后的任务列表
                    applyFilter(); // 应用筛选
                }
            });
        });
        
        // 为现有的任务项添加完成功能
        document.querySelectorAll('.complete-btn').forEach(function(button) {
            button.addEventListener('click', function() {
                const taskItem = this.closest('.task-item');
                if (taskItem) {
                    const taskContent = taskItem.querySelector('.task-content');
                    // 切换任务内容的样式
                    taskContent.classList.toggle('completed');
                    
                    // 切换按钮文字并移动任务位置
                    if (button.textContent === '完成') {
                        button.textContent = '取消';
                        // 任务标记为完成，移到列表底部
                        taskList.appendChild(taskItem);
                    } else {
                        button.textContent = '完成';
                        // 任务标记为未完成，移到列表顶部
                        taskList.insertBefore(taskItem, taskList.firstChild);
                    }
                    
                    saveTasks(); // 保存更新后的任务列表
                    applyFilter(); // 应用筛选
                }
            });
        });
        
        // 筛选功能
        function applyFilter() {
            document.querySelectorAll('.task-item').forEach(function(taskItem) {
                if (currentFilter === 'all') {
                    // 显示所有任务
                    taskItem.style.display = 'flex';
                } else {
                    // 检查任务的分类
                    const categoryTag = taskItem.querySelector('.category-tag');
                    if (categoryTag.classList.contains(`category-${currentFilter}`)) {
                        taskItem.style.display = 'flex';
                    } else {
                        taskItem.style.display = 'none';
                    }
                }
            });
        }
        
        // 为筛选按钮添加事件监听器
        filterButtons.forEach(function(button) {
            button.addEventListener('click', function() {
                // 移除所有按钮的active类
                filterButtons.forEach(function(btn) {
                    btn.classList.remove('active');
                });
                // 添加当前按钮的active类
                this.classList.add('active');
                // 更新当前筛选类别
                currentFilter = this.getAttribute('data-filter');
                // 应用筛选
                applyFilter();
            });
        });
    </script>
</body>
</html>